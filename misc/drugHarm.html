<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
      #chart {
        position: fixed;
        left: 0px;
        right: 0px;
        top: 0px;
        bottom: 0px;
        z-index: -2;
        height: 100%;
      }
      body {
        font-family: sans-serif
      }
      div.tooltip {
        position: absolute;
        text-align: left;
        left: 5%;
        top: 5%;
        width: 20%;
        height: 15%;
        padding: 2px;
        border: 0px;
        border-radius: 2px;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div id="chart">
    </div>
    <script>
      var chartDiv = document.getElementById("chart");
      var width = chartDiv.clientWidth -20;
      var height = chartDiv.clientHeight -20;

      var x = d3.scaleLinear().range([0,width]).domain([0,10])
      var y = d3.scaleLinear().range([0,height]).domain([10,0])
      var scale = d3.scaleLinear().range([0,height]).domain([0,1000])

      var classScale = d3.scaleOrdinal()
        .domain(['NA','C','B','A'])
        .range(['#80b1d3','#ffed6f','#fdb462','#fb8072'])

      var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)

      //start drawing actual data
      d3.tsv('drugHarm.txt', function(error,data){
        if (error) throw error;

        console.log(data)

        var node = svg.selectAll('g')
          .data(data)
          .enter()
          .append('g')
          .attr('class','node')
          .attr('transform',function(d){return 'translate(' + x(d['Sum Physical']) + ',' + y(d['Sum Dependance']) + ')'})

        var circle = node.append('circle')
          .attr('r','10')
          .attr('fill',function(d){return classScale(d['Class'])})

        var label = node.append('text')
          .attr('dx','15')
          .attr('dy','10')
          .text(function(d){return d['Drug']})
      })
    </script>
  </body>
</html>
